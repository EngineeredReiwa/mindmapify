# Mindmapify ユーザー体験設計書

## ユーザージャーニー

### メインユースケース
「論理的思考をコード化してチームメンバーと共有したい」

**特徴**: ブレインストーミング → ロジックツリー → Mermaid Flowchartコード

### 理想的なユーザーフロー

#### 1. 初回アクセス（0-10秒）
- **アクション**: ブラウザでURLを開く
- **表示**: 即座に空のホワイトボードが表示
- **UI要素**:
  - 中央に大きなキャンバスエリア
  - 上部にシンプルなツールバー
  - 右側にMermaidコードプレビューパネル（初期は折りたたみ）
- **ユーザーの状態**: 「何かクリックしてみよう」

#### 2. 最初のノード作成（10-30秒）
- **アクション**: ツールバーの「ノード追加」をクリック
- **表示**: ノードが出現、自動でテキスト入力モードに
- **フィードバック**: プレースホルダー「アイデアを入力...」
- **Mermaidコード**: リアルタイムで生成開始
- **ユーザーの状態**: 「簡単だ！」

#### 3. ノード追加と接続（30秒-2分）
- **アクション**: 
  - ツールバーの「New Node」ボタンクリック → 2つ目のノード作成
  - ノードの接続点（常時表示）をドラッグ → 点線矢印表示
  - 他ノードの接続点上でドロップ → 実線接続に変換
- **表示**: 
  - 接続点は全ノードに常時表示（4方向）
  - ドラッグ中は点線矢印でプレビュー
  - ドロップ成功で滑らかな実線接続に変換
- **Mermaidコード**: 構造が即座に反映
- **ユーザーの状態**: 「思考が整理されていく感覚」

#### 4. 共有準備（2-3分）
- **アクション**: Mermaid Flowchartコードパネルを確認
- **表示**: 論理関係が明確なFlowchartコード
- **アクション**: コピーボタンをクリック
- **フィードバック**: 完成したコードをクリップボードに保存
- **ユーザーの状態**: 「思考構造が完璧にコード化された」

## インターフェース設計

### 主要操作とフィードバック

#### ノード操作
- **作成**: クリック → 即座にノード出現 + テキスト入力フォーカス
- **編集**: ダブルクリック → インライン編集モード
- **移動**: ドラッグ → スムーズな移動、他ノードとの位置関係を自動調整
- **削除**: 選択 + Deleteキー or 右クリックメニュー

#### 接続操作
- **作成**: 
  - 接続点（常時表示、4方向）をクリック&ドラッグ
  - ドラッグ中は点線矢印が表示、マウスカーソルを追跡
  - 他ノードの接続点上でドロップ → 実線接続作成
  - 空白地点でドロップ → 点線消失、接続作成なし
- **削除**: 接続線をクリック → ハイライト → Deleteキー

#### キャンバス操作
- **パン**: スペースキー + ドラッグ or 中クリックドラッグ
- **ズーム**: マウスホイール or Ctrl + +/-
- **フィット**: ダブルクリック（空白エリア）→ 全ノードが見える範囲に調整

### 視覚的フィードバック

#### 色彩設計
- **背景**: #f8f9fa（薄いグレー）
- **ノード**: #ffffff（白、ソフトシャドウ）
- **選択ノード**: #007bff（青、ハイライト）
- **接続線**: #6c757d（グレー）
- **アクティブ接続線**: #007bff（青）

#### アニメーション
- **ノード作成**: 0.2秒のスケールアップ
- **接続線描画**: 0.3秒のパス描画アニメーション
- **ホバー効果**: 0.1秒のスケール微調整
- **ページ遷移**: なし（SPA、即座レスポンス）

### アクセシビリティ配慮

#### キーボード操作
- **Tab**: ノード間移動
- **Enter**: ノード編集開始
- **Escape**: 編集終了・選択解除
- **Ctrl+Z/Y**: 元に戻す・やり直し
- **Ctrl+C**: Mermaidコードコピー

#### スクリーンリーダー対応
- ノード数とその内容の読み上げ
- 接続関係の説明
- 操作可能要素のラベル付け

## エラーハンドリングとガイダンス

### 初回ユーザー向けガイド
- **初回アクセス時**: 「クリックしてノードを追加してみましょう」の軽いヒント
- **1つ目のノード作成後**: 「もう一つノードを作って線でつないでみましょう」
- **3ノード達成後**: ガイド非表示、自由使用モード

### エラー防止
- **操作取り消し**: 全操作に対してUndo/Redo
- **自動保存**: ローカルストレージに1秒ごと保存
- **接続失敗**: 無効な接続時は視覚的フィードバック

### パフォーマンス配慮
- **大量ノード**: 50ノード超で仮想化検討
- **レスポンシブ**: モバイルでも基本操作可能
- **軽量性**: 初期ロード3秒以内

## 成功の測定指標

### 即座性
- ページロード → 操作可能まで: **3秒以内**
- ノード作成クリック → 表示まで: **100ms以内**
- Mermaidコード生成: **500ms以内**

### 直感性
- 初回ユーザーの1分以内ノード作成率: **90%以上**
- 説明なしでの3ノード+接続達成率: **80%以上**
- コード共有までの平均時間: **3分以内**

このシンプルで直感的な体験設計により、ユーザーは技術的な複雑さを感じることなく、思考の整理と共有に集中できます。

## 🚧 Phase 4A: 緊急UX改善

### 🔍 実使用で発見された問題点

#### 1. 矢印方向の不明確さ
- **問題**: 矢印ヘッドが小さく、接続の方向性が分からない
- **影響**: ロジックツリーの親子関係が不明確
- **改善**: 明確な三角形矢印ヘッドの実装

#### 2. ノード編集の煩雑さ
- **問題**: ダブルクリック→別テキストボックス→編集が面倒
- **影響**: 編集効率の低下、ユーザー体験の悪化
- **改善**: ノード内での直接編集機能

#### 3. テキスト表示の制限
- **問題**: 長いテキストが「...」で見切れる
- **影響**: 情報の可視性低下、内容確認の困難
- **改善**: 自動折り返しとノードサイズ動的調整

### 📈 改善後の期待効果
- **視覚的明確性**: 論理構造が一目で理解できる
- **編集効率**: ストレスフリーなテキスト編集
- **情報可視性**: 全ての情報が適切に表示される